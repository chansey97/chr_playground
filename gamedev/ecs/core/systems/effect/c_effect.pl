%% common logic for every effect?